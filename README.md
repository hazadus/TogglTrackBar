# TogglTrackBar

Простое нативное приложение для macOS на Swift/SwiftUI. Позволяет управлять записью времени через TogglTrack API из строки меню macOS.

> **⚠️ Внимание: персональный проект!**
>
> Это приложение было разработано с целью изучения Swift/SwiftUI, а также для личного использования.
> В нём могут быть ошибки, недоработки, упрощения. Функционал ровно такой и в том объёме, который мне нужен.
> Я не планирую распространять или каким-либо образом поддерживать это приложение.
> Вы можете любым способом использовать его, модифицировать, и т.д.
>
> Основа приложения была собрана в "черновом" репо, а сюда код аккуратно переносится для чистой истории коммитов.

## Системные требования

- macOS 15.7+

## Установка

- Клонируйте репозиторий.
- Откройте проект в Xcode. Если его нет, установите Xcode из AppStore.
  - Собрать проект - Cmd+B
  - Запустить проект - Cmd+R

## Использование

- Запустите приложение - появится значок в строке меню.
- В выпадающем меню есть пункты для запуска и остановки записи времени.
  - Можно только "продолжить" предыдущие записи времени - функционала для создания новых не предусмотрено.
  - TogglTrack API имеет довольно жесткие [ограничения на количество запросов](https://engineering.toggl.com/docs/#api-quota) – не более 30 в час. Поэтому приложение не производит поллинг: данные пользователя, записей времени и текущей записи времени (три запроса) загружаются только на старте приложения. Далее запросы выполняются только при запуске/остановке записей времени. Таким образом, если запись/остановка будут инициированы через веб интерфейс или мобильное приложение, TogglTrackBar не "увидит" этих событий.
- В настройках приложения можно задать продолжительность одного "помидора" в минутах. Тогда, по истечении указанного времени непрерывной работы (когда есть текущая запись времени), вы будете получать уведомление о необходимости сделать перерыв.

### Настройка уведомлений

Чтобы уведомления о завершении помидора оставались на экране до действия пользователя:

1. **System Settings → Notifications → TogglTrackBar**
2. Измените стиль уведомлений с **Banners** на **Alerts**

## Полезные ссылки

- [Документация TogglTrack API](https://engineering.toggl.com/docs/)

## Документация

В доках собраны полезные знания, накопленные при разработке проекта.

- [Автоматизация сборки](./docs/build-automation.md)

## Инструменты разработки

### Установка

```bash
brew install just           # Task runner
brew install swiftlint      # Линтер
```

`swift-format` уже входит в Xcode, устанавливать не нужно.

### Команды

```bash
just              # Список всех команд
just format       # Форматирование кода
just lint         # Проверка линтером
just lint-fix     # Автоисправление замечаний линтера
just intall-hooks # Установить pre-commit git hook для проверки кода
```

Конфигурация линтера: `.swiftlint.yml`, форматтера: `.swift-format`.
